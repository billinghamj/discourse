#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative "../lib/migrations"

require "colored2"
require "thor"

module Migrations
  configure_zeitwerk
  enable_i18n

  module CLI
    class Application < Thor
      include ::Migrations::CLI::ConvertCommand
      include ::Migrations::CLI::ImportCommand
      include ::Migrations::CLI::UploadCommand
      include ::Migrations::CLI::SchemaCommand

      def self.exit_on_failure?
        true
      end
    end
  end
end

# rubocop:disable Discourse/NoChdir
Dir.chdir(File.expand_path("../..", __dir__)) { ::Migrations::CLI::Application.start }
# rubocop:enable Discourse/NoChdir
